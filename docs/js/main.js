!function(t){var s={};function i(e){if(s[e])return s[e].exports;var h=s[e]={i:e,l:!1,exports:{}};return t[e].call(h.exports,h,h.exports,i),h.l=!0,h.exports}i.m=t,i.c=s,i.d=function(t,s,e){i.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:e})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,s){if(1&s&&(t=i(t)),8&s)return t;if(4&s&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(i.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var h in t)i.d(e,h,function(s){return t[s]}.bind(null,h));return e},i.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(s,"a",s),s},i.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},i.p="",i(i.s=0)}([function(t,s,i){"use strict";i.r(s);const e=requestAnimationFrame||webkitRequestAnimationFrame||mozRequestAnimationFrame||oRequestAnimationFrame||msRequestAnimationFrame;class h{constructor(t=0,s=0){this.x=t,this.y=s}set(t,s){this.x=t,this.y=s}get(){return{x:thix.x,y:this.y}}}const o=(t,s)=>new h(t,s);const n=(t,s=t)=>Math.floor(Math.random()*(s-t))+t,r=(t,s,i,e,h,o=1,n="#ffffff")=>{t.beginPath(),t.strokeStyle=n,t.lineWidth=o,t.moveTo(s,i),t.lineTo(e,h),t.stroke()},a=(t,s,i,e,h="#ffffff")=>{t.beginPath(),t.fillStyle=h,t.arc(s,i,e,0,2*Math.PI),t.fill()};const c=(t,s=1)=>(void 0===s&&(s=1),o(s*Math.cos(t),s*Math.sin(t))),l=(t,s)=>{try{var i=t.x-s.x,e=t.y-s.y;return Math.sqrt(i*i+e*e)}catch{return 0}};class u{constructor(t,s){this.pos=t,this.dir=c(s)}show(t){t.save(),t.translate(this.pos.x,this.pos.y),r(t,0,0,20*this.dir.x,20*this.dir.y,1,"rgba(255, 255, 255, 0.2)"),t.restore()}cast(t){const s=t.a.x,i=t.a.y,e=t.b.x,h=t.b.y,n=this.pos.x,r=this.pos.y,a=this.pos.x+this.dir.x,c=this.pos.y+this.dir.y,l=(s-e)*(r-c)-(i-h)*(n-a);if(0==l)return;const u=((s-n)*(r-c)-(i-r)*(n-a))/l;if(u>0&&u<1&&-((s-e)*(i-r)-(i-h)*(s-n))/l>0){const t=o();return t.x=s+u*(e-s),t.y=i+u*(h-i),t}}}class f{constructor(t,s){this.pos=o(t,s),this.rays=[];for(let t=0;t<360;t+=1)this.rays.push(new u(this.pos,t*Math.PI/180))}update(t,s){this.pos.set(t,s)}look(t,s){for(let i=0;i<this.rays.length;i++){const e=this.rays[i];let h=null,o=1/0;for(let s of t){const t=e.cast(s);if(t){const s=l(this.pos,t);s<o&&(o=s,h=t)}}h&&r(s,this.pos.x,this.pos.y,h.x,h.y)}}show(t){a(t,this.pos.x,this.pos.y,8);for(let s of this.rays)s.show(t)}}class d{constructor(t,s,i,e){this.a=o(t,s),this.b=o(i,e)}show(t){r(t,this.a.x,this.a.y,this.b.x,this.b.y,2)}}new class{constructor(t){this.canvas=document.getElementById(t),this.context=this.canvas.getContext("2d"),this.step,this.width=500,this.height=500,this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.style.backgroundColor="#000000",this.mousePos=o(),this.walls=[],this.particle=new f(this.width/2,this.height/2)}draw(){this.context.clearRect(0,0,this.width,this.height);for(let t of this.walls)t.show(this.context);this.particle.update(this.mousePos.x||this.width/2,this.mousePos.y||this.width/2),this.particle.show(this.context),this.particle.look(this.walls,this.context)}eventsHandlers(){this.canvas.onmousemove=(t=>{this.mousePos=function(t,s){try{const i=t.getBoundingClientRect(),e=s.clientX-i.left,h=s.clientY-i.top;return o(e,h)}catch{return o()}}(this.canvas,t)})}step(){e(this.step.bind(this)),this.draw()}run(){this.eventsHandlers(),this.step();for(let t=0;t<3;t++){let s=n(0,this.width),i=n(0,this.width),e=n(0,this.height),h=n(0,this.height);this.walls[t]=new d(s,e,i,h)}this.walls.push(new d(0,0,this.width,0)),this.walls.push(new d(this.width,0,this.width,this.height)),this.walls.push(new d(this.width,this.height,0,this.height)),this.walls.push(new d(0,this.height,0,0))}}("raycasting").run()}]);